# AstroPaper ğŸ“„

![AstroPaper](public/astropaper-og.jpg)
![Typescript](https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white)
![GitHub](https://img.shields.io/github/license/satnaing/astro-paper?color=%232F3741&style=for-the-badge)
[![Conventional Commits](https://img.shields.io/badge/Conventional%20Commits-1.0.0-%23FE5196?logo=conventionalcommits&logoColor=white&style=for-the-badge)](https://conventionalcommits.org)
[![Commitizen friendly](https://img.shields.io/badge/commitizen-friendly-brightgreen.svg?style=for-the-badge)](http://commitizen.github.io/cz-cli/)

AstroPaper is a minimal, responsive, accessible and SEO-friendly Astro blog theme. This theme is designed and crafted based on [my personal blog](https://satnaing.dev/blog).

This theme follows best practices and provides accessibility out of the box. Light and dark mode are supported by default. Moreover, additional color schemes can also be configured.

This theme is self-documented \_ which means articles/posts in this theme can also be considered as documentations. Read [the blog posts](https://astro-paper.pages.dev/posts/) or check [the README Documentation Section](#-documentation) for more info.

## ğŸ”¥ Features

- [x] type-safe markdown
- [x] super fast performance
- [x] accessible (Keyboard/VoiceOver)
- [x] responsive (mobile ~ desktops)
- [x] SEO-friendly
- [x] light & dark mode
- [x] fuzzy search
- [x] draft posts & pagination
- [x] sitemap & rss feed
- [x] followed best practices
- [x] highly customizable
- [x] dynamic OG image generation for blog posts [#15](https://github.com/satnaing/astro-paper/pull/15) ([Blog Post](https://astro-paper.pages.dev/posts/dynamic-og-image-generation-in-astropaper-blog-posts/))

_Note: I've tested screen-reader accessibility of AstroPaper using **VoiceOver** on Mac and **TalkBack** on Android. I couldn't test all other screen-readers out there. However, accessibility enhancements in AstroPaper should be working fine on others as well._

## âœ… Lighthouse Score

<p align="center">
  <a href="https://pagespeed.web.dev/report?url=https%3A%2F%2Fastro-paper.pages.dev%2F&form_factor=desktop">
    <img width="710" alt="AstroPaper Lighthouse Score" src="AstroPaper-lighthouse-score.svg">
  <a>
</p>

## ğŸš€ Project Structure

Inside of AstroPaper, you'll see the following folders and files:

```bash
/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â””â”€â”€ logo.svg
â”‚   â”‚   â””â”€â”€ logo.png
â”‚   â””â”€â”€ favicon.svg
â”‚   â””â”€â”€ astropaper-og.jpg
â”‚   â””â”€â”€ robots.txt
â”‚   â””â”€â”€ toggle-theme.js
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ assets/
â”‚   â”‚   â””â”€â”€ socialIcons.ts
â”‚   â”œâ”€â”€ components/
â”‚   â”œâ”€â”€ content/
â”‚   â”‚   |  blog/
â”‚   â”‚   |    â””â”€â”€ some-blog-posts.md
â”‚   â”‚   â””â”€â”€ config.ts
â”‚   â”œâ”€â”€ layouts/
â”‚   â””â”€â”€ pages/
â”‚   â””â”€â”€ styles/
â”‚   â””â”€â”€ utils/
â”‚   â””â”€â”€ config.ts
â”‚   â””â”€â”€ types.ts
â””â”€â”€ package.json
```

Astro looks for `.astro` or `.md` files in the `src/pages/` directory. Each page is exposed as a route based on its file name.

Any static assets, like images, can be placed in the `public/` directory.

All blog posts are stored in `src/content/blog` directory.

## ğŸ“– Documentation

Documentation can be read in two formats\_ _markdown_ & _blog post_.

- Configuration - [markdown](src/content/blog/how-to-configure-astropaper-theme.md) | [blog post](https://astro-paper.pages.dev/posts/how-to-configure-astropaper-theme/)
- Add Posts - [markdown](src/content/blog/adding-new-post.md) | [blog post](https://astro-paper.pages.dev/posts/adding-new-posts-in-astropaper-theme/)
- Customize Color Schemes - [markdown](src/content/blog/customizing-astropaper-theme-color-schemes.md) | [blog post](https://astro-paper.pages.dev/posts/customizing-astropaper-theme-color-schemes/)
- Predefined Color Schemes - [markdown](src/content/blog/predefined-color-schemes.md) | [blog post](https://astro-paper.pages.dev/posts/predefined-color-schemes/)

> For AstroPaper v1, check out [this branch](https://github.com/satnaing/astro-paper/tree/astro-paper-v1) and this [live URL](https://astro-paper-v1.astro-paper.pages.dev/)

## ğŸ’» Tech Stack

**Main Framework** - [Astro](https://astro.build/)  
**Type Checking** - [TypeScript](https://www.typescriptlang.org/)  
**Component Framework** - [ReactJS](https://reactjs.org/)  
**Styling** - [TailwindCSS](https://tailwindcss.com/)  
**UI/UX** - [Figma](https://figma.com)  
**Fuzzy Search** - [FuseJS](https://fusejs.io/)  
**Icons** - [Boxicons](https://boxicons.com/) | [Tablers](https://tabler-icons.io/)  
**Code Formatting** - [Prettier](https://prettier.io/)  
**Deployment** - [Cloudflare Pages](https://pages.cloudflare.com/)  
**Illustration in About Page** - [https://freesvgillustration.com](https://freesvgillustration.com/)  
**Linting** - [ESLint](https://eslint.org)

## ğŸ‘¨ğŸ»â€ğŸ’» Running Locally

The easiest way to run this project locally is to run the following command in your desired directory.

```bash
# npm 6.x
npm create astro@latest --template satnaing/astro-paper

# npm 7+, extra double-dash is needed:
npm create astro@latest -- --template satnaing/astro-paper

# yarn
yarn create astro --template satnaing/astro-paper
```

## Google Site Verification (optional)

You can easily add your [Google Site Verification HTML tag](https://support.google.com/webmasters/answer/9008080#meta_tag_verification&zippy=%2Chtml-tag) in AstroPaper using environment variable. This step is optional. If you don't add the following env variable, the google-site-verification tag won't appear in the html `<head>` section.

```bash
# in your environment variable file (.env)
PUBLIC_GOOGLE_SITE_VERIFICATION=your-google-site-verification-value
```

## ğŸ§ Commands

All commands are run from the root of the project, from a terminal:

> **_Note!_** For `Docker` commands we must have it [installed](https://docs.docker.com/engine/install/) in your machine.

| Command                              | Action                                                                                                                           |
| :----------------------------------- | :------------------------------------------------------------------------------------------------------------------------------- |
| `npm install`                        | Installs dependencies                                                                                                            |
| `npm run dev`                        | Starts local dev server at `localhost:4321`                                                                                      |
| `npm run build`                      | Build your production site to `./dist/`                                                                                          |
| `npm run preview`                    | Preview your build locally, before deploying                                                                                     |
| `npm run format:check`               | Check code format with Prettier                                                                                                  |
| `npm run format`                     | Format codes with Prettier                                                                                                       |
| `npm run sync`                       | Generates TypeScript types for all Astro modules. [Learn more](https://docs.astro.build/en/reference/cli-reference/#astro-sync). |
| `npm run cz`                         | Commit code changes with commitizen                                                                                              |
| `npm run lint`                       | Lint with ESLint                                                                                                                 |
| `docker compose up -d`               | Run AstroPaper on docker, You can access with the same hostname and port informed on `dev` command.                              |
| `docker compose run app npm install` | You can run any command above into the docker container.                                                                         |

> **_Warning!_** Windows PowerShell users may need to install the [concurrently package](https://www.npmjs.com/package/concurrently) if they want to [run diagnostics](https://docs.astro.build/en/reference/cli-reference/#astro-check) during development (`astro check --watch & astro dev`). For more info, see [this issue](https://github.com/satnaing/astro-paper/issues/113).

## âœ¨ Feedback & Suggestions

If you have any suggestions/feedback, you can contact me via [my email](mailto:contact@satnaing.dev). Alternatively, feel free to open an issue if you find bugs or want to request new features.

## ğŸ“œ License

Licensed under the MIT License, Copyright Â© 2023

---

Made with ğŸ¤ by [Sat Naing](https://satnaing.dev) ğŸ‘¨ğŸ»â€ğŸ’» and [contributors](https://github.com/satnaing/astro-paper/graphs/contributors).


# ä½è¿ç®—æ ¸å¿ƒç¬”è®°

## ä¸€ã€åŸºç¡€ä½è¿ç®—ç¬¦

| è¿ç®—ç¬¦   | åç§°        | C++ ç¬¦å· | è¯´æ˜                             |
| :------- | :---------- | :------- | :------------------------------- |
| æŒ‰ä½ä¸   | AND         | `&`      | ä¸¤ä½éƒ½ä¸º 1 æ—¶ï¼Œç»“æœä¸º 1          |
| æŒ‰ä½æˆ–   | OR          | `\|`     | ä»»æ„ä¸€ä½ä¸º 1 æ—¶ï¼Œç»“æœä¸º 1        |
| æŒ‰ä½å¼‚æˆ– | XOR         | `^`      | ä¸¤ä½ä¸åŒæ—¶ï¼Œç»“æœä¸º 1             |
| æŒ‰ä½å–å | NOT         | `~`      | é€ä½å–åï¼Œ0 å˜ 1ï¼Œ1 å˜ 0         |
| å·¦ç§»     | Left Shift  | `<<`     | æ‰€æœ‰ä½å‘å·¦ç§»åŠ¨ï¼Œå³ä¾§è¡¥ 0         |
| å³ç§»     | Right Shift | `>>`     | æ‰€æœ‰ä½å‘å³ç§»åŠ¨ï¼Œå·¦ä¾§è¡¥ç¬¦å·ä½æˆ– 0 |

## äºŒã€äºŒè¿›åˆ¶çŠ¶æ€å‹ç¼© (çŠ¶å‹)

**æ ¸å¿ƒæ€æƒ³**ï¼šå°†ä¸€ä¸ªé•¿åº¦ä¸º `n` çš„å¸ƒå°”æ•°ç»„ï¼ˆæˆ–ä»»ä½•å…·æœ‰ä¸¤ç§çŠ¶æ€çš„å…ƒç´ é›†åˆï¼‰å‹ç¼©åˆ°ä¸€ä¸ªæ•´æ•°ä¸­ã€‚æ•´æ•°çš„æ¯ä¸€ä½å¯¹åº”ä¸€ä¸ªå…ƒç´ çš„çŠ¶æ€ã€‚è¿™æœ¬è´¨ä¸Šæ˜¯**ä»æè¿°åˆ°ç¼–ç **çš„æ€ç»´è½¬å˜ã€‚

#### æ ¸å¿ƒä½œç”¨

1.  **çŠ¶æ€çš„ç´¢å¼•åŒ–**
    *   **ç—›ç‚¹**ï¼šåœ¨ DP ä¸­ï¼Œæ— æ³•ç›´æ¥åˆ›å»º `dp[vector<bool>]` è¿™æ ·çš„æ•°æ®ç»“æ„ã€‚ä½¿ç”¨ `map` æˆ– `unordered_map` æ•ˆç‡ä½ä¸‹ã€‚
    *   **è§£å†³**ï¼šçŠ¶å‹åçš„æ•´æ•° `mask` å¯ç›´æ¥ç”¨ä½œæ•°ç»„ä¸‹æ ‡ `dp[mask]`ï¼Œå®ç° `O(1)` å­˜å–ã€‚è¿™æå¤§æå‡äº†ç©ºé—´å’Œæ—¶é—´æ•ˆç‡ï¼ˆä¾‹å¦‚ï¼Œå­˜å‚¨ `k` ä¸ªçŠ¶æ€åªéœ€ `k` ä¸ªæ•´æ•°ï¼Œè€Œé `k*n` çš„ç©ºé—´ï¼‰ã€‚

2.  **é›†åˆè¿ç®—çš„é™ç»´æ‰“å‡»**
    *   å°† `O(n)` çš„é›†åˆæ“ä½œè½¬åŒ–ä¸º `O(1)` çš„ä½è¿ç®—ã€‚
    *   **å¹¶é›† (Union)**: `mask_a | Wmask_b`
    *   **äº¤é›† (Intersection)**: `mask_a & mask_b`
    *   **å·®é›† (A - B)**: `mask_a & (~mask_b)`

3.  **çŠ¶æ€çš„éå†**
    *   `for (int mask = 0; mask < (1 << n); ++mask)` æšä¸¾å³å¯éå†æ‰€æœ‰ `2^n` ç§çŠ¶æ€ã€‚

#### å±€é™æ€§ä¸é€‚ç”¨åœºæ™¯

*   **æŒ‡æ•°çº§å¤æ‚åº¦**ï¼šçŠ¶å‹å¹¶æœªæ”¹å˜é—®é¢˜çš„æŒ‡æ•°çº§æœ¬è´¨ï¼Œç®—æ³•å¤æ‚åº¦é€šå¸¸ä¸º `O(2^n * poly(n))`ã€‚
*   **ä½æ•°é™åˆ¶**ï¼š`int` (32ä½) æˆ– `long long` (64ä½) å†³å®šäº† `n` çš„ä¸Šé™ã€‚
*   **é€‚ç”¨åœºæ™¯**ï¼š
    *   **æ•°æ®è§„æ¨¡å°**ï¼šæ ¸å¿ƒå…ƒç´ æ•°é‡ `n` é€šå¸¸ `â‰¤ 20`ã€‚
    *   **æ¶‰åŠå­é›†/æ’åˆ—**ï¼šé—®é¢˜çŠ¶æ€ä¸é›†åˆçš„å­é›†ã€æ’åˆ—æˆ–ç»„åˆæœ‰å…³ã€‚
    *   **éœ€è¦è®°å½•çŠ¶æ€**ï¼šéœ€åœ¨ç®—æ³•ä¸­ï¼ˆå°¤å…¶ DPï¼‰è®°å½•â€œå“ªäº›å…ƒç´ å·²è¢«ä½¿ç”¨/è®¿é—®â€ç­‰ä¿¡æ¯ã€‚

#### å¸¸ç”¨æŠ€å·§

| æ“ä½œ                | C++ å®ç°             |
| :------------------ | :------------------- |
| **è·å–**ç¬¬ `k` ä½   | `(n >> k) & 1`       |
| **è·å–**å `k` ä½   | `n & ((1 << k) - 1)` |
| å°†ç¬¬ `k` ä½**ç½® 1** | `n \| (1 << k)`      |
| å°†ç¬¬ `k` ä½**ç½® 0** | `n & (~(1 << k))`    |
| å°†ç¬¬ `k` ä½**å–å** | `n ^ (1 << k)`       |

## ä¸‰ã€Lowbit è¿ç®—

**æ ¸å¿ƒæ€æƒ³**ï¼š`lowbit(n)` ç”¨äºè·å–éè´Ÿæ•´æ•° `n` åœ¨äºŒè¿›åˆ¶è¡¨ç¤ºä¸­ï¼Œ**æœ€é å³çš„ '1' æ‰€ä»£è¡¨çš„æ•°å€¼**ã€‚

*   **å®ç°**ï¼š`lowbit(n) = n & (~n + 1) = n & -n` (åˆ©ç”¨äº†è®¡ç®—æœºè¡¥ç çš„ç‰¹æ€§)

#### æ ¸å¿ƒä½œç”¨

1.  **æ ‘çŠ¶æ•°ç»„ (Fenwick Tree) çš„åŸºçŸ³**
    *   `lowbit` æ˜¯æ ‘çŠ¶æ•°ç»„çš„ç†è®ºæ ¸å¿ƒã€‚èŠ‚ç‚¹ `C[i]` æ‰€ç®¡è¾–çš„åŒºé—´é•¿åº¦æ°å¥½æ˜¯ `lowbit(i)`ã€‚
    *   **æ›´æ–°** `add(i)`: é€šè¿‡ `i += lowbit(i)` å‘ä¸Šå±‚ä¼ é€’ã€‚
    *   **æŸ¥è¯¢** `query(i)`: é€šè¿‡ `i -= lowbit(i)` å‘å‰ç¼€å›æº¯ã€‚

2.  **é«˜æ•ˆéå†çŠ¶æ€çš„æ‰€æœ‰ '1' ä½**
    *   **å¸¸è§„æ–¹æ³•**ï¼š`for` å¾ªç¯ `n` æ¬¡ï¼Œå¤æ‚åº¦ `O(n)`ã€‚
    *   **`lowbit` æ–¹æ³•**ï¼šç›´æ¥è·³åˆ°ä¸‹ä¸€ä¸ª '1'ï¼Œå¤æ‚åº¦ä¸º `O(k)` (k ä¸º '1' çš„ä¸ªæ•°)ã€‚å½“ `k << n` æ—¶æ•ˆç‡æ›´é«˜ã€‚

    ```cpp
    // éå† mask ä¸­æ‰€æœ‰çš„ '1'
    while (mask > 0) {
        int lb = mask & -mask; // æ‰¾åˆ°æœ€ä½ä½çš„ 1
        // lb æ˜¯ 2 çš„å¹‚ï¼Œå¯ç”¨äºè®¡ç®—ä½ç½®æˆ–ç›´æ¥ä½¿ç”¨
        // int pos = __builtin_ctz(lb); // GCC å†…ç½®å‡½æ•°ï¼Œå¿«é€Ÿè·å–ä½ç½®
      
        // ... å¤„ç† lb ...

        mask -= lb; // ä» mask ä¸­ç§»é™¤è¿™ä¸ª '1'
    }
    ```

# é€’æ¨ä¸é€’å½’æ ¸å¿ƒç¬”è®°

## ä¸€ã€æ ¸å¿ƒæ€æƒ³ï¼šåˆ†è§£é—®é¢˜

é€’æ¨ï¼ˆIterationï¼‰å’Œé€’å½’ï¼ˆRecursionï¼‰éƒ½æ˜¯è§£å†³é—®é¢˜çš„ä¸¤ç§åŸºæœ¬æ–¹æ³•ï¼Œå…¶æ ¸å¿ƒæ€æƒ³ä¸€è„‰ç›¸æ‰¿ï¼š**å°†ä¸€ä¸ªå¤æ‚çš„å¤§é—®é¢˜ï¼Œåˆ†è§£ä¸ºè‹¥å¹²ä¸ªè§„æ¨¡æ›´å°ã€ç»“æ„ç›¸åŒçš„å­é—®é¢˜æ¥æ±‚è§£ã€‚**

*   **é€’å½’ (Top-Down)**ï¼šä»å¤§é—®é¢˜å‡ºå‘ï¼Œè°ƒç”¨è‡ªèº«å»è§£å†³æ›´å°çš„å­é—®é¢˜ï¼Œç›´åˆ°é‡åˆ°æ— æ³•å†åˆ†è§£çš„**åŸºæœ¬æƒ…å†µï¼ˆBase Caseï¼‰**ï¼Œç„¶åé€å±‚è¿”å›ç»“æœã€‚å®ƒæ›´ç¬¦åˆäººç±»çš„ç›´è§‰æ€ç»´ã€‚
    *   **å£è¯€**ï¼šå…ˆè°ƒç”¨ï¼Œåæ±‚è§£ã€‚

*   **é€’æ¨ (Bottom-Up)**ï¼šä»å·²çŸ¥çš„**åˆå§‹çŠ¶æ€ï¼ˆInitial Stateï¼‰**å‡ºå‘ï¼Œé€šè¿‡**é€’æ¨å…³ç³»å¼**ï¼Œä¸€æ­¥æ­¥è®¡ç®—å‡ºæ›´å¤§è§„æ¨¡é—®é¢˜çš„è§£ï¼Œç›´åˆ°ç›®æ ‡é—®é¢˜ã€‚å®ƒé€šå¸¸ä»¥å¾ªç¯ï¼ˆ`for`, `while`ï¼‰çš„å½¢å¼å®ç°ã€‚
    *   **å£è¯€**ï¼šå…ˆæ±‚è§£ï¼Œåä½¿ç”¨ã€‚

| ç‰¹æ€§     | é€’å½’ (Recursion)                 | é€’æ¨ (Iteration)                     |
| :------- | :------------------------------- | :----------------------------------- |
| **æ–¹å‘** | Top-Down (ä»å¤§åˆ°å°)              | Bottom-Up (ä»å°åˆ°å¤§)                 |
| **å®ç°** | å‡½æ•°è°ƒç”¨è‡ªèº«                     | å¾ªç¯                                 |
| **å…³é”®** | é€’å½’å‡ºå£ (Base Case)             | åˆå§‹çŠ¶æ€ (Initial State)             |
| **ä¼˜ç‚¹** | ä»£ç ç›´è§‚ï¼Œæ˜“äºç†è§£å’Œå®ç°å¤æ‚é€»è¾‘ | æ•ˆç‡é«˜ï¼Œæ— å‡½æ•°è°ƒç”¨å¼€é”€ï¼Œæ— æ ˆæº¢å‡ºé£é™© |
| **ç¼ºç‚¹** | å‡½æ•°è°ƒç”¨å¼€é”€å¤§ï¼Œå¯èƒ½å¯¼è‡´æ ˆæº¢å‡º   | ä»£ç å¯èƒ½ä¸å¦‚é€’å½’ç›´è§‚ï¼Œéœ€æ˜ç¡®è®¡ç®—é¡ºåº |

## äºŒã€é€’å½’ä¸‰è¦ç´ 

ç¼–å†™ä¸€ä¸ªæ­£ç¡®çš„é€’å½’å‡½æ•°ï¼Œå¿…é¡»æ˜ç¡®ä»¥ä¸‹ä¸‰ç‚¹ï¼š

1.  **å‡½æ•°å®šä¹‰**ï¼šæ˜ç¡®å‡½æ•°çš„åŠŸèƒ½ã€‚ä¾‹å¦‚ï¼Œ`fib(n)` çš„åŠŸèƒ½æ˜¯â€œè®¡ç®—æ–æ³¢é‚£å¥‘æ•°åˆ—çš„ç¬¬ `n` é¡¹â€ã€‚
2.  **é€’å½’å…³ç³»**ï¼šæ‰¾åˆ°å¤§é—®é¢˜ä¸å­é—®é¢˜çš„å…³ç³»ã€‚ä¾‹å¦‚ï¼Œ`fib(n) = fib(n-1) + fib(n-2)`ã€‚
3.  **é€’å½’å‡ºå£ (Base Case)**ï¼šå®šä¹‰é—®é¢˜æœ€å°è§„æ¨¡çš„è§£ï¼Œè¿™æ˜¯é€’å½’çš„ç»ˆç‚¹ã€‚ä¾‹å¦‚ï¼Œ`fib(0) = 0`, `fib(1) = 1`ã€‚

**ç¤ºä¾‹ï¼šé˜¶ä¹˜**
```cpp
// é€’å½’å®ç°é˜¶ä¹˜
int factorial(int n) {
    // 1. å‡½æ•°å®šä¹‰ï¼šè®¡ç®— n çš„é˜¶ä¹˜
    // 3. é€’å½’å‡ºå£
    if (n == 0) {
        return 1;
    }
    // 2. é€’å½’å…³ç³»ï¼šn! = n * (n-1)!
    return n * factorial(n - 1);
}
```

## ä¸‰ã€é€’æ¨ä¸åŠ¨æ€è§„åˆ’ (DP)

é€’æ¨æ˜¯åŠ¨æ€è§„åˆ’æœ€å¸¸è§çš„å®ç°æ–¹å¼ã€‚DP çš„æ ¸å¿ƒå°±æ˜¯æ‰¾åˆ°**çŠ¶æ€**å’Œ**çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ã€‚

*   **çŠ¶æ€**ï¼šé€šå¸¸ç”¨ `dp[i]` æˆ– `dp[i][j]` è¡¨ç¤ºè§£å†³è§„æ¨¡ä¸º `i` (æˆ– `i, j`) çš„å­é—®é¢˜æ—¶çš„æœ€ä¼˜è§£ã€‚
*   **çŠ¶æ€è½¬ç§»æ–¹ç¨‹**ï¼šå³é€’æ¨å…³ç³»å¼ï¼Œæè¿°äº†çŠ¶æ€ä¹‹é—´å¦‚ä½•æ¼”åŒ–ã€‚ä¾‹å¦‚ `dp[i] = dp[i-1] + dp[i-2]`ã€‚

**ç¤ºä¾‹ï¼šæ–æ³¢é‚£å¥‘æ•°åˆ—**
```cpp
// é€’æ¨å®ç°æ–æ³¢é‚£å¥‘æ•°åˆ—
int fibonacci(int n) {
    if (n <= 1) return n;
    vector<int> dp(n + 1);
    // åˆå§‹çŠ¶æ€
    dp[0] = 0;
    dp[1] = 1;
    // é€’æ¨å…³ç³»
    for (int i = 2; i <= n; ++i) {
        dp[i] = dp[i - 1] + dp[i - 2];
    }
    return dp[n];
}
```

## å››ã€é€’å½’çš„ä¼˜åŒ–ï¼šè®°å¿†åŒ–æœç´¢

**é—®é¢˜**ï¼šæœ´ç´ é€’å½’ä¼šé‡å¤è®¡ç®—å¤§é‡ç›¸åŒçš„å­é—®é¢˜ï¼ˆå¦‚ `fib(5)` ä¼šå¤šæ¬¡è®¡ç®— `fib(3)`ï¼‰ï¼Œå¯¼è‡´æŒ‡æ•°çº§æ—¶é—´å¤æ‚åº¦ã€‚

**è®°å¿†åŒ–æœç´¢ (Memoization)**ï¼šæ˜¯**é€’å½’**å’Œ**åŠ¨æ€è§„åˆ’**æ€æƒ³çš„å®Œç¾ç»“åˆã€‚å®ƒåœ¨é€’å½’çš„åŸºç¡€ä¸Šï¼Œå¢åŠ ä¸€ä¸ªâ€œå¤‡å¿˜å½•â€ï¼ˆé€šå¸¸æ˜¯æ•°ç»„æˆ–å“ˆå¸Œè¡¨ï¼‰ï¼Œç”¨äºå­˜å‚¨å·²è®¡ç®—è¿‡çš„å­é—®é¢˜çš„è§£ã€‚

*   **æ ¸å¿ƒæµç¨‹**ï¼š
    1.  åœ¨å‡½æ•°å…¥å£ï¼Œæ£€æŸ¥å¤‡å¿˜å½•ä¸­æ˜¯å¦å·²æœ‰å½“å‰çŠ¶æ€çš„è§£ã€‚
    2.  å¦‚æœæœ‰ï¼Œç›´æ¥è¿”å›ï¼Œé¿å…é‡å¤è®¡ç®—ã€‚
    3.  å¦‚æœæ²¡æœ‰ï¼ŒæŒ‰æ­£å¸¸é€’å½’é€»è¾‘è®¡ç®—ã€‚
    4.  åœ¨è¿”å›ç»“æœå‰ï¼Œå°†è§£å­˜å…¥å¤‡å¿˜å½•ã€‚

**ç¤ºä¾‹ï¼šè®°å¿†åŒ–æœç´¢æ±‚æ–æ³¢é‚£å¥‘**
```cpp
vector<int> memo; // å¤‡å¿˜å½•

int fib_memo(int n) {
    if (n <= 1) return n;
    // æ£€æŸ¥å¤‡å¿˜å½•
    if (memo[n] != -1) {
        return memo[n];
    }
    // è®¡ç®—å¹¶å­˜å…¥å¤‡å¿˜å½•
    memo[n] = fib_memo(n - 1) + fib_memo(n - 2);
    return memo[n];
}
```
**æœ¬è´¨**ï¼šè®°å¿†åŒ–æœç´¢æ˜¯ç”¨é€’å½’çš„å½¢å¼ï¼Œå®ç°äº†é€’æ¨ï¼ˆDPï¼‰çš„æ•ˆæœã€‚å®ƒåœ¨é€»è¾‘ä¸Šæ˜¯è‡ªé¡¶å‘ä¸‹çš„ï¼Œä½†åœ¨è®¡ç®—é¡ºåºä¸Šï¼Œæ¯ä¸ªå­é—®é¢˜ä»ç„¶åªè¢«è®¡ç®—ä¸€æ¬¡ã€‚è¿™ä½¿å¾—å®ƒå…¼å…·äº†é€’å½’ä»£ç çš„ç›´è§‚æ€§å’Œ DP çš„é«˜æ•ˆç‡ã€‚


# å‰ç¼€å’Œä¸å·®åˆ†æ ¸å¿ƒç¬”è®°

## ä¸€ã€æ ¸å¿ƒæ€æƒ³ï¼šé¢„å¤„ç†ä¸é€†è¿ç®—

å‰ç¼€å’Œï¼ˆPrefix Sumï¼‰ä¸å·®åˆ†ï¼ˆDifference Arrayï¼‰æ˜¯ä¸€å¯¹äº’ä¸º**é€†è¿ç®—**çš„æŠ€å·§ã€‚å®ƒä»¬éƒ½åˆ©ç”¨**é¢„å¤„ç†**æ€æƒ³ï¼Œå°†æŸäº›é¢‘ç¹çš„æ“ä½œè¿›è¡Œä¼˜åŒ–ã€‚

*   **å‰ç¼€å’Œ**ï¼šé€šè¿‡é¢„å¤„ç†ï¼Œå°†**å¤šæ¬¡åŒºé—´æŸ¥è¯¢**çš„å¤æ‚åº¦ä» `O(N)` é™è‡³ `O(1)`ã€‚
*   **å·®åˆ†**ï¼šé€šè¿‡é¢„å¤„ç†ï¼Œå°†**å¤šæ¬¡åŒºé—´ä¿®æ”¹**çš„å¤æ‚åº¦ä» `O(N)` é™è‡³ `O(1)`ã€‚

| æ“ä½œ         | æœ´ç´ åšæ³• | ä¼˜åŒ–æŠ€å·§   | é¢„å¤„ç†å¤æ‚åº¦ | æ“ä½œå¤æ‚åº¦ |
| :----------- | :------- | :--------- | :----------- | :--------- |
| **åŒºé—´æ±‚å’Œ** | `O(N)`   | **å‰ç¼€å’Œ** | `O(N)`       | `O(1)`     |
| **åŒºé—´ä¿®æ”¹** | `O(N)`   | **å·®åˆ†**   | `O(N)`       | `O(1)`     |

## äºŒã€å‰ç¼€å’Œ (Prefix Sum)

**æ ¸å¿ƒæ€æƒ³**ï¼šé¢„å…ˆè®¡ç®—å‡ºæ•°ç»„ä»å¼€å¤´åˆ°æ¯ä¸€ä½çš„å…ƒç´ æ€»å’Œã€‚ç”¨ç©ºé—´æ¢æ—¶é—´ã€‚

#### ä¸€ç»´å‰ç¼€å’Œ

*   **å®šä¹‰**ï¼š`pre[i]` å­˜å‚¨åŸæ•°ç»„ `A` ä¸­ `A[1]` åˆ° `A[i]` çš„æ€»å’Œã€‚
*   **æ„é€  (é¢„å¤„ç†)**ï¼š`pre[i] = pre[i-1] + A[i]`
*   **åº”ç”¨ (åŒºé—´æŸ¥è¯¢)**ï¼šè®¡ç®— `A[L]` åˆ° `A[R]` çš„å’Œã€‚
    *   **å…¬å¼**ï¼š`sum(L, R) = pre[R] - pre[L-1]`
    *   **å¤æ‚åº¦**ï¼šé¢„å¤„ç† `O(N)`ï¼Œæ¯æ¬¡æŸ¥è¯¢ `O(1)`ã€‚

#### äºŒç»´å‰ç¼€å’Œ

*   **å®šä¹‰**ï¼š`pre[i][j]` å­˜å‚¨ä»¥ `(1,1)` ä¸ºå·¦ä¸Šè§’ï¼Œ`(i,j)` ä¸ºå³ä¸‹è§’çš„çŸ©å½¢åŒºåŸŸå†…æ‰€æœ‰å…ƒç´ çš„å’Œã€‚
*   **æ„é€  (é¢„å¤„ç†)**ï¼šåˆ©ç”¨å®¹æ–¥åŸç†ã€‚
    *   **å…¬å¼**ï¼š`pre[i][j] = pre[i-1][j] + pre[i][j-1] - pre[i-1][j-1] + A[i][j]`
*   **åº”ç”¨ (çŸ©å½¢åŒºåŸŸæ±‚å’Œ)**ï¼šè®¡ç®—ä»¥ `(x1, y1)` ä¸ºå·¦ä¸Šè§’ï¼Œ`(x2, y2)` ä¸ºå³ä¸‹è§’çš„çŸ©å½¢å’Œã€‚
    *   **å…¬å¼**ï¼š`sum = pre[x2][y2] - pre[x1-1][y2] - pre[x2][y1-1] + pre[x1-1][y1-1]`
    *   **å¤æ‚åº¦**ï¼šé¢„å¤„ç† `O(N*M)`ï¼Œæ¯æ¬¡æŸ¥è¯¢ `O(1)`ã€‚

## ä¸‰ã€å·®åˆ† (Difference Array)

**æ ¸å¿ƒæ€æƒ³**ï¼šå­˜å‚¨æ•°ç»„ä¸­ç›¸é‚»å…ƒç´ çš„å·®ã€‚å¯¹ä¸€ä¸ªåŒºé—´è¿›è¡Œå¢å‡æ“ä½œï¼Œåªä¼šå½±å“åˆ°åŒºé—´çš„ä¸¤ä¸ªç«¯ç‚¹åœ¨å·®åˆ†æ•°ç»„ä¸­å¯¹åº”çš„å€¼ã€‚

#### ä¸€ç»´å·®åˆ†

*   **å®šä¹‰**ï¼š`diff[i]` å­˜å‚¨ `A[i] - A[i-1]` (è§„å®š `A[0]=0`)ã€‚
    *   `diff[1] = A[1]`
    *   `diff[i] = A[i] - A[i-1]` for `i > 1`
*   **æ€§è´¨**ï¼šåŸæ•°ç»„ `A` æ˜¯å·®åˆ†æ•°ç»„ `diff` çš„å‰ç¼€å’Œã€‚`A[i] = pre_sum(diff, i)`ã€‚
*   **æ„é€  (é¢„å¤„ç†)**ï¼š`diff[i] = A[i] - A[i-1]`
*   **åº”ç”¨ (åŒºé—´ä¿®æ”¹)**ï¼šå°†åŸæ•°ç»„ `A` çš„ `[L, R]` åŒºé—´å†…æ‰€æœ‰å…ƒç´ åŠ ä¸Š `val`ã€‚
    *   **æ“ä½œ**ï¼š`diff[L] += val; diff[R+1] -= val;`
    *   **åŸç†**ï¼š
        *   `diff[L] += val` ä½¿å¾—ä» `A[L]` å¼€å§‹çš„æ‰€æœ‰å…ƒç´ éƒ½å¢åŠ äº† `val`ã€‚
        *   `diff[R+1] -= val` æŠµæ¶ˆäº†ä» `A[R+1]` å¼€å§‹çš„å¢åŠ æ•ˆæœï¼Œä»è€Œä¿è¯åªæœ‰ `[L, R]` åŒºé—´å—åˆ°äº†å½±å“ã€‚
    *   **å¤æ‚åº¦**ï¼šé¢„å¤„ç† `O(N)`ï¼Œæ¯æ¬¡ä¿®æ”¹ `O(1)`ã€‚ä¿®æ”¹å®Œæˆåï¼Œè‹¥éœ€å¾—åˆ°æœ€ç»ˆæ•°ç»„ï¼Œå†å¯¹å·®åˆ†æ•°ç»„æ±‚ä¸€æ¬¡å‰ç¼€å’Œï¼Œå¤æ‚åº¦ `O(N)`ã€‚

#### äºŒç»´å·®åˆ†

*   **æ€æƒ³**ï¼šä¸äºŒç»´å‰ç¼€å’Œç±»ä¼¼ï¼Œ`diff[i][j]` çš„æ”¹å˜ä¼šå½±å“å…¶å³ä¸‹æ–¹æ‰€æœ‰åŒºåŸŸã€‚å¯¹ä¸€ä¸ªçŸ©å½¢åŒºåŸŸè¿›è¡Œä¿®æ”¹ï¼Œåªéœ€åœ¨ 4 ä¸ªå…³é”®ç‚¹è¿›è¡Œæ“ä½œã€‚
*   **åº”ç”¨ (çŸ©å½¢åŒºåŸŸä¿®æ”¹)**ï¼šå°†ä»¥ `(x1, y1)` ä¸ºå·¦ä¸Šè§’ï¼Œ`(x2, y2)` ä¸ºå³ä¸‹è§’çš„çŸ©å½¢åŒºåŸŸå†…æ‰€æœ‰å…ƒç´ åŠ ä¸Š `val`ã€‚
    *   **æ“ä½œ**ï¼š
        ```
        diff[x1][y1] += val;
        diff[x1][y2+1] -= val;
        diff[x2+1][y1] -= val;
        diff[x2+1][y2+1] += val;
        ```
    *   **åŸç†**ï¼šåŒæ ·æ˜¯å®¹æ–¥åŸç†ã€‚åœ¨ `(x1, y1)` å¢åŠ  `val` å½±å“æ•´ä¸ªå³ä¸‹åŒºåŸŸï¼Œå†åœ¨å¦å¤–ä¸‰ä¸ªè§’è¿›è¡Œâ€œå‡â€å’Œâ€œåŠ â€æ“ä½œæ¥æŠµæ¶ˆå¤šä½™çš„å½±å“ã€‚

**æ€»ç»“**ï¼šå‰ç¼€å’Œä¸å·®åˆ†æ˜¯å¤„ç†é™æ€æ•°ç»„åŒºé—´é—®é¢˜çš„åˆ©å™¨ã€‚å½“é¢˜ç›®æ¶‰åŠå¤§é‡**åŒºé—´æŸ¥è¯¢**æ—¶ï¼Œè€ƒè™‘**å‰ç¼€å’Œ**ï¼›å½“æ¶‰åŠå¤§é‡**åŒºé—´ä¿®æ”¹**æ—¶ï¼Œè€ƒè™‘**å·®åˆ†**ã€‚å®ƒä»¬æ˜¯ç®—æ³•ç«èµ›ä¸­å¿…é¡»ç†Ÿç»ƒæŒæ¡çš„åŸºç¡€æŠ€å·§ã€‚



# äºŒåˆ†æŸ¥æ‰¾ (Binary Search) æ ¸å¿ƒç¬”è®°

## ä¸€ã€æ ¸å¿ƒæ€æƒ³ï¼šå•è°ƒæ€§ä¸å¯¹åŠèˆå¼ƒ

äºŒåˆ†æŸ¥æ‰¾æ˜¯ä¸€ç§åœ¨**æœ‰åºåºåˆ—**ä¸­è¿›è¡ŒæŸ¥æ‰¾çš„é«˜æ•ˆç®—æ³•ã€‚å…¶ç²¾é«“åœ¨äºåˆ©ç”¨åºåˆ—çš„**å•è°ƒæ€§**ï¼Œæ¯æ¬¡å°†æœç´¢åŒºé—´ç¼©å°ä¸€åŠã€‚

*   **å‰æ**ï¼šæŸ¥æ‰¾çš„æ•°ç»„ã€ç­”æ¡ˆç©ºé—´å¿…é¡»å…·æœ‰**å•è°ƒæ€§**æˆ–**å¯äºŒåˆ†æ€§**ã€‚è¿™æ„å‘³ç€æˆ‘ä»¬å¯ä»¥é€šè¿‡æ£€æŸ¥ä¸­é—´ç‚¹ï¼Œæ˜ç¡®åœ°åˆ¤æ–­ç­”æ¡ˆåœ¨å·¦åŠéƒ¨åˆ†è¿˜æ˜¯å³åŠéƒ¨åˆ†ã€‚
*   **å¨åŠ›**ï¼šå°†æŸ¥æ‰¾æ—¶é—´å¤æ‚åº¦ä» `O(N)` é™è‡³ `O(log N)`ã€‚

## äºŒã€äºŒåˆ†æŸ¥æ‰¾çš„ä¸¤ç§ç±»å‹

1.  **æ•´æ•°äºŒåˆ†**ï¼šåœ¨æ•´æ•°é›†åˆï¼ˆå¦‚æ•°ç»„ä¸‹æ ‡ï¼‰ä¸­æŸ¥æ‰¾ã€‚**ç»†èŠ‚æœ€å¤šï¼Œæœ€æ˜“å‡ºé”™**ã€‚
2.  **å®æ•°äºŒåˆ†**ï¼šåœ¨å®æ•°åŸŸä¸ŠæŸ¥æ‰¾ã€‚é€»è¾‘ç›¸å¯¹ç®€å•ï¼Œé€šè¿‡æ§åˆ¶ç²¾åº¦æ¥ç»ˆæ­¢ã€‚

## ä¸‰ã€æ•´æ•°äºŒåˆ†ï¼šæ‰‹å†™æ¨¡æ¿ä¸ç»†èŠ‚å‰–æ

æ•´æ•°äºŒåˆ†çš„éš¾ç‚¹åœ¨äº**è¾¹ç•Œå¤„ç†**ã€‚`l`ã€`r`ã€`mid` çš„å–å€¼å’Œæ›´æ–°ç¨æœ‰ä¸æ…å°±ä¼šå¯¼è‡´æ­»å¾ªç¯æˆ–é”™è¿‡æ­£ç¡®ç­”æ¡ˆã€‚


ä»¥æ•°ç»„ `A = [1, 2, 4, 5, 5, 5, 7, 9]` (0-based index) ä¸ºä¾‹ï¼Œçœ‹ä¼¼å¾®å°çš„è¡¨è¿°å·®å¼‚ï¼Œä¼šå¯¼è‡´ç»“æœæˆªç„¶ä¸åŒï¼š

| æŸ¥æ‰¾ç›®æ ‡                 | æœŸæœ›ç´¢å¼•    |
| :----------------------- | :---------- |
| ç¬¬ä¸€ä¸ª **>** 5 çš„å…ƒç´     | `6` (å€¼ä¸º7) |
| ç¬¬ä¸€ä¸ª **>=** 5 çš„å…ƒç´    | `3` (å€¼ä¸º5) |
| æœ€åä¸€ä¸ª **<** 5 çš„å…ƒç´   | `2` (å€¼ä¸º4) |
| æœ€åä¸€ä¸ª **<=** 5 çš„å…ƒç´  | `5` (å€¼ä¸º5) |

å¦‚æœé’ˆå¯¹æ¯ç§æƒ…å†µå•ç‹¬è®¾è®¡äºŒåˆ†é€»è¾‘ï¼Œä¸ä»…ç¹çï¼Œè€Œä¸”ææ˜“å› è¾¹ç•Œå¤„ç†ä¸å½“è€Œå‡ºé”™ã€‚**éœ€è¦ä¸€ä¸ªæ›´é€šç”¨çš„æŠ½è±¡æ¨¡å‹ã€‚**

#### æ ¸å¿ƒæŠ½è±¡ï¼šâ€œçº¢è“æŸ“è‰²â€æ¨¡å‹

ä¸å…¶çº ç»“äº `>`ã€`>=`ã€`<`ã€`<=`ï¼Œä¸å¦‚ä½¿ç”¨ä¸€ä¸ªæ›´é€šç”¨çš„æ¨¡å‹ï¼š

> å°†æœ‰åºåºåˆ—æŠ½è±¡ä¸ºä¸¤éƒ¨åˆ†ï¼šä¸€éƒ¨åˆ†ä¸æ»¡è¶³ `check(x)` æ¡ä»¶ï¼ˆçº¢è‰²ï¼‰ï¼Œå¦ä¸€éƒ¨åˆ†æ»¡è¶³ `check(x)` æ¡ä»¶ï¼ˆè“è‰²ï¼‰ã€‚äºŒåˆ†çš„ç›®æ ‡å°±æ˜¯æ‰¾åˆ°**çº¢è“ä¸¤åŒºçš„åˆ†ç•Œç‚¹**ã€‚

è¿™æ¶µç›–äº†æ‰€æœ‰æ•´æ•°äºŒåˆ†é—®é¢˜ã€‚æˆ‘ä»¬è¦åšçš„å°±æ˜¯ç¡®å®šï¼š
1.  `check(mid)` å‡½æ•°çš„å«ä¹‰æ˜¯ä»€ä¹ˆï¼Ÿï¼ˆä¾‹å¦‚ï¼Œ`check(i)` å®šä¹‰ä¸º `A[i] >= 5`ï¼‰
2.  æˆ‘ä»¬è¦æ‰¾çš„æ˜¯ â€œè“è‰²â€ çš„å·¦è¾¹ç•Œï¼Œè¿˜æ˜¯ â€œè“è‰²â€ çš„å³è¾¹ç•Œï¼Ÿ

#### å®ç°æ€æƒ³ï¼šè¾¹ç•Œæ¨è¿›

ç»´æŠ¤ä¸¤ä¸ªæŒ‡é’ˆ `l` å’Œ `r`ï¼Œå®ƒä»¬åˆ†åˆ«ä»£è¡¨åºåˆ—è¢«åˆ’åˆ†æˆçš„å·¦å³ä¸¤ä¸ªåŒºåŸŸçš„è¾¹ç•Œï¼š

* **`l`**ï¼šå·¦ä¾§åŒºåŸŸçš„**å³ç«¯ç‚¹**ã€‚
* **`r`**ï¼šå³ä¾§åŒºåŸŸçš„**å·¦ç«¯ç‚¹**ã€‚

å¾ªç¯çš„æ ¸å¿ƒæ˜¯åˆ¤æ–­ `mid` çš„é¢œè‰²ï¼Œå¹¶æ®æ­¤ç§»åŠ¨ `l` æˆ– `r`ï¼Œä»è€Œæ‰©å¼ å…¶ä¸­ä¸€ä¸ªåŒºåŸŸçš„è¾¹ç•Œï¼Œç›´è‡³äºŒè€…ç›¸é‡ã€‚
å½“å¾ªç¯ç»“æŸæ—¶ï¼Œ`l` ä¸ `r` ä¼šåˆäºç›®æ ‡è“åŒºçš„è¾¹ç•Œç‚¹ã€‚
å› æ­¤ï¼Œå®é™…ä¸Šï¼š

* ä¸€ä¸ªæŒ‡é’ˆç»´æŠ¤çš„æ˜¯ **è“è‰²åŒºåŸŸçš„å·²ç¡®è®¤è¾¹ç•Œ**ï¼›
* å¦ä¸€ä¸ªæŒ‡é’ˆç»´æŠ¤çš„æ˜¯ **çº¢è‰²åŒºåŸŸçš„å·²ç¡®è®¤è¾¹ç•Œå‘è“è‰²æ–¹å‘æ‹“å±• 1 çš„ä½ç½®**ã€‚


#### æ¨¡æ¿ 1: å¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„æœ€å·¦å€¼

è¯¥æ¨¡æ¿ç”¨äº `[çº¢, çº¢, ..., è“, è“]` æ¨¡å¼ï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°**ç¬¬ä¸€ä¸ª**æ»¡è¶³ `check(mid)` çš„ä½ç½®ï¼ˆå³è“åŒºçš„å·¦è¾¹ç•Œï¼‰ã€‚

åœ¨æ­¤æƒ…å½¢ä¸‹ï¼š

* `l` è¡¨ç¤º**çº¢è‰²åŒºåŸŸçš„ç«¯ç‚¹å‘è“è‰²æ–¹å‘æ‹“å±• 1 çš„ä½ç½®**ï¼›
* `r` è¡¨ç¤º**è“è‰²åŒºåŸŸçš„ç«¯ç‚¹**ã€‚
  é€šè¿‡ `l = mid + 1`ï¼Œå¯ç¡®ä¿æœ€ç»ˆ `l == r` æ—¶ï¼Œæ”¶æŸäºè“åŒºçš„å·¦è¾¹ç•Œã€‚

```cpp
// åœ¨é—­åŒºé—´ [L, R] ä¸­æŸ¥æ‰¾ç¬¬ä¸€ä¸ªæ»¡è¶³ check(x) çš„ x
int binary_search_template_1(int L, int R) {
    int l = L, r = R;
    while (l < r) {
        int mid = l + r >> 1; // å‘ä¸‹å–æ•´
        if (check(mid)) {
            r = mid;          // mid åœ¨è“åŒºï¼Œè“è‰²ç¡®è®¤è¾¹ç•Œ [r] æ›´æ–°ä¸º [mid]
        } else {
            l = mid + 1;      // mid åœ¨çº¢åŒºï¼Œçº¢è‰²ç¡®è®¤è¾¹ç•Œ+1 [l] æ›´æ–°ä¸º [mid+1]
        }
    }
    return l; // æˆ– rï¼Œå¾ªç¯ç»“æŸæ—¶ l == rï¼Œä½äºè“åŒºå·¦è¾¹ç•Œ
}
```


#### æ¨¡æ¿ 2: å¯»æ‰¾æ»¡è¶³æ¡ä»¶çš„æœ€å³å€¼

è¯¥æ¨¡æ¿ç”¨äº `[è“, è“, ..., çº¢, çº¢]` æ¨¡å¼ï¼Œç›®æ ‡æ˜¯æ‰¾åˆ°**æœ€åä¸€ä¸ª**æ»¡è¶³ `check(mid)` çš„ä½ç½®ï¼ˆå³è“åŒºçš„å³è¾¹ç•Œï¼‰ã€‚

åœ¨æ­¤æƒ…å½¢ä¸‹ï¼š

* `l` è¡¨ç¤º**è“è‰²åŒºåŸŸçš„ç«¯ç‚¹**ï¼›
* `r` è¡¨ç¤º**çº¢è‰²åŒºåŸŸçš„ç«¯ç‚¹å‘è“è‰²æ–¹å‘æ‹“å±• 1 çš„ä½ç½®**ã€‚
  é€šè¿‡ `r = mid - 1`ï¼Œå¯ç¡®ä¿æœ€ç»ˆ `l == r` æ—¶ï¼Œæ”¶æŸäºè“åŒºçš„å³è¾¹ç•Œã€‚

```cpp
// åœ¨é—­åŒºé—´ [L, R] ä¸­æŸ¥æ‰¾æœ€åä¸€ä¸ªæ»¡è¶³ check(x) çš„ x
int binary_search_template_2(int L, int R) {
    int l = L, r = R;
    while (l < r) {
        int mid = l + r + 1 >> 1; // å‘ä¸Šå–æ•´
        if (check(mid)) {
            l = mid;              // mid åœ¨è“åŒºï¼Œè“è‰²ç¡®è®¤è¾¹ç•Œ [l] æ›´æ–°ä¸º [mid]
        } else {
            r = mid - 1;          // mid åœ¨çº¢åŒºï¼Œçº¢è‰²ç¡®è®¤è¾¹ç•Œ-1 [r] æ›´æ–°ä¸º [mid-1]
        }
    }
    return l; // æˆ– rï¼Œå¾ªç¯ç»“æŸæ—¶ l == rï¼Œä½äºè“åŒºå³è¾¹ç•Œ
}
```

#### å…³é”®æ­¥éª¤ï¼šéªŒè¯è¿”å›ç»“æœ

æ‰‹å†™äºŒåˆ†æ¨¡æ¿åœ¨æ‰¾ä¸åˆ°åˆæ³•è§£æ—¶ï¼Œä¼šè¿”å›åŒºé—´çš„è¾¹ç•Œã€‚å› æ­¤ï¼Œ**ä¸èƒ½ä¿è¯ç­”æ¡ˆåœ¨åŒºé—´å†…å­˜åœ¨æ—¶ï¼Œéœ€è¦å¯¹è¿”å›å€¼è¿›è¡ŒéªŒè¯ã€‚**

```cpp
// ç¤ºä¾‹ï¼šä½¿ç”¨æ¨¡æ¿2åè¿›è¡ŒéªŒè¯
int ans = binary_search_template_2(L, R);
if (!check(ans)) {
    cout << "æœªæ‰¾åˆ°æ»¡è¶³æ¡ä»¶çš„å…ƒç´ " << endl;
} else {
    cout << "æœ€åä¸€ä¸ªæ»¡è¶³æ¡ä»¶çš„å…ƒç´ æ˜¯ï¼š" << ans << endl;
}
```

#### æ¨¡æ¿ç»†èŠ‚æ·±åº¦å‰–æ

1.  **`while (l < r)`**ï¼š
    *   **å«ä¹‰**ï¼šåªè¦åŒºé—´é•¿åº¦å¤§äº1ï¼Œå°±ç»§ç»­äºŒåˆ†ã€‚
    *   **ä¸ºä»€ä¹ˆä¸æ˜¯ `l <= r`**ï¼šå½“ `l == r` æ—¶ï¼ŒåŒºé—´å·²ç»ç¼©å°åˆ°å”¯ä¸€çš„ç‚¹ï¼Œè¿™ä¸ªç‚¹å°±æ˜¯ç­”æ¡ˆï¼Œå¾ªç¯åº”è¯¥ç»ˆæ­¢ã€‚å¦‚æœä½¿ç”¨ `l <= r`ï¼Œåœ¨æŸäº›æ›´æ–°ç­–ç•¥ä¸‹ï¼ˆå¦‚ `l = mid`ï¼‰ï¼Œå½“ `l` å’Œ `r` ç›¸é‚»æ—¶å¯èƒ½å¯¼è‡´æ­»å¾ªç¯ã€‚`l < r` æ˜¯æœ€å®‰å…¨çš„é€‰æ‹©ã€‚

2.  **`mid` çš„å–æ•´æ–¹å¼ (æœ€å…³é”®çš„é˜²æ­»å¾ªç¯ç»†èŠ‚)**ï¼š
    *   **è§„åˆ™**ï¼š`mid` çš„å–æ•´æ–¹å¼å¿…é¡»ä¸è¾¹ç•Œæ”¶ç¼©çš„æ–¹å¼ç›¸åŒ¹é…ï¼Œä»¥ç¡®ä¿åŒºé—´æ€»èƒ½ç¼©å°ã€‚
    *   **åœºæ™¯1ï¼š`r = mid`** (æ¨¡æ¿1)
        *   å½“åŒºé—´åªå‰©ä¸¤ä¸ªå…ƒç´  `[l, l+1]` æ—¶ï¼Œ`mid = (l + l+1) >> 1` ä¼šå¾—åˆ° `l`ã€‚
        *   å¦‚æœæ­¤æ—¶ `check(mid)` ä¸º `true`ï¼Œ`r` ä¼šæ›´æ–°ä¸º `mid` (`l`)ï¼ŒåŒºé—´å˜ä¸º `[l, l]`ï¼Œå¾ªç¯ç»ˆæ­¢ã€‚
        *   å¦‚æœ `check(mid)` ä¸º `false`ï¼Œ`l` ä¼šæ›´æ–°ä¸º `mid+1` (`l+1`)ï¼ŒåŒºé—´å˜ä¸º `[l+1, l+1]`ï¼Œå¾ªç¯ç»ˆæ­¢ã€‚
        *   **ç»“è®º**ï¼š`mid = l + r >> 1` (å‘ä¸‹å–æ•´) ä¸ `r = mid` æ­é…æ˜¯å®‰å…¨çš„ã€‚
    *   **åœºæ™¯2ï¼š`l = mid`** (æ¨¡æ¿2)
        *   å½“åŒºé—´åªå‰©ä¸¤ä¸ªå…ƒç´  `[l, l+1]` æ—¶ï¼Œå¦‚æœç”¨ `mid = l + r >> 1`ï¼Œ`mid` ä»ä¸º `l`ã€‚
        *   å¦‚æœæ­¤æ—¶ `check(mid)` ä¸º `true`ï¼Œ`l` æ›´æ–°ä¸º `mid` (`l`)ï¼ŒåŒºé—´ä»æ˜¯ `[l, l+1]`ï¼Œ**å‘ç”Ÿæ­»å¾ªç¯ï¼**
        *   **è§£å†³æ–¹æ¡ˆ**ï¼šå¿…é¡»å‘ä¸Šå–æ•´ï¼`mid = (l + r + 1) >> 1`ã€‚è¿™æ ·åœ¨ `[l, l+1]` æ—¶ï¼Œ`mid` ä¼šå¾—åˆ° `l+1`ï¼Œç¡®ä¿åŒºé—´èƒ½ç¼©å°ã€‚
    *   **è®°å¿†å£è¯€**ï¼šæ›´æ–° `l = mid` æ—¶ï¼Œ`mid` å¿…é¡»å‘ä¸Šå–æ•´ (`+1`)ã€‚

3.  **è¾¹ç•Œæ›´æ–° `+1` æˆ– `-1`**ï¼š
    *   å¦‚æœ `check(mid)` æ»¡è¶³æ¡ä»¶ï¼Œè€Œæˆ‘ä»¬è¦æ‰¾çš„æ˜¯**ç¬¬ä¸€ä¸ª**æ»¡è¶³æ¡ä»¶çš„ï¼Œé‚£ä¹ˆ `mid` æœ¬èº«å°±æ˜¯ä¸€ä¸ªæ½œåœ¨çš„ç­”æ¡ˆï¼Œæ‰€ä»¥æˆ‘ä»¬æ”¶ç¼©å³è¾¹ç•Œæ—¶ä¸èƒ½æ’é™¤å®ƒï¼š`r = mid`ã€‚
    *   å¦‚æœ `check(mid)` ä¸æ»¡è¶³æ¡ä»¶ï¼Œé‚£ä¹ˆ `mid` è‚¯å®šä¸æ˜¯ç­”æ¡ˆï¼Œå¯ä»¥ç›´æ¥æ’é™¤ï¼š`l = mid + 1` æˆ– `r = mid - 1`ã€‚


## å››ã€STL ä¸­çš„äºŒåˆ†æŸ¥æ‰¾å‡½æ•° (`lower_bound` / `upper_bound`)

C++ æ ‡å‡†åº“ `<algorithm>` æä¾›äº†ä¸¤ä¸ªå¼ºå¤§çš„ã€ç»è¿‡ä¼˜åŒ–çš„äºŒåˆ†æŸ¥æ‰¾å‡½æ•°ï¼Œå¯ä»¥ç›´æ¥åœ¨**å·²æ’åº**çš„å®¹å™¨ï¼ˆå¦‚ `vector`, `array`ï¼‰æˆ–æ•°ç»„ä¸Šä½¿ç”¨ã€‚å®ƒä»¬è¿”å›çš„æ˜¯**è¿­ä»£å™¨**ã€‚

#### `lower_bound`

*   **åŠŸèƒ½**ï¼šæŸ¥æ‰¾**ç¬¬ä¸€ä¸ªå¤§äºæˆ–ç­‰äº (`>=`)**ç»™å®šå€¼çš„å…ƒç´ ã€‚
*   **ä¸æ¨¡æ¿çš„è”ç³»**ï¼šè¿™å®Œå…¨ç­‰ä»·äºæˆ‘ä»¬çš„**æ¨¡æ¿ 1**ï¼Œå…¶ä¸­ `check(x)` çš„å®šä¹‰æ˜¯ `x >= val`ã€‚å®ƒå¯»æ‰¾çš„æ˜¯ `[false, false, ..., true, true, ...]` åˆ†å‰²çº¿ä¸­ç¬¬ä¸€ä¸ª `true` çš„ä½ç½®ã€‚
*   **ç”¨æ³•**ï¼š`lower_bound(begin, end, val)`
*   **è¿”å›å€¼**ï¼š
    *   å¦‚æœæ‰¾åˆ°ï¼Œè¿”å›æŒ‡å‘è¯¥å…ƒç´ çš„è¿­ä»£å™¨ã€‚
    *   å¦‚æœæ‰¾ä¸åˆ°ï¼ˆå³æ‰€æœ‰å…ƒç´ éƒ½å°äº `val`ï¼‰ï¼Œè¿”å› `end` è¿­ä»£å™¨ã€‚

#### `upper_bound`

*   **åŠŸèƒ½**ï¼šæŸ¥æ‰¾**ç¬¬ä¸€ä¸ªä¸¥æ ¼å¤§äº (`>`)**ç»™å®šå€¼çš„å…ƒç´ ã€‚
*   **ä¸æ¨¡æ¿çš„è”ç³»**ï¼šè¿™åŒæ ·å¯ä»¥çœ‹ä½œæ˜¯**æ¨¡æ¿ 1** çš„åº”ç”¨ï¼Œå…¶ä¸­ `check(x)` çš„å®šä¹‰æ˜¯ `x > val`ã€‚
*   **ç”¨æ³•**ï¼š`upper_bound(begin, end, val)`
*   **è¿”å›å€¼**ï¼š
    *   å¦‚æœæ‰¾åˆ°ï¼Œè¿”å›æŒ‡å‘è¯¥å…ƒç´ çš„è¿­ä»£å™¨ã€‚
    *   å¦‚æœæ‰¾ä¸åˆ°ï¼ˆå³æ‰€æœ‰å…ƒç´ éƒ½å°äºæˆ–ç­‰äº `val`ï¼‰ï¼Œè¿”å› `end` è¿­ä»£å™¨ã€‚

#### å®ç”¨æŠ€å·§ä¸ä»£ç ç¤ºä¾‹

å‡è®¾æœ‰ä¸€ä¸ªå·²æ’åºçš„ `vector<int> v = {10, 20, 30, 30, 40, 50};`

1.  **è·å–ç´¢å¼•**ï¼šç”¨è¿”å›çš„è¿­ä»£å™¨å‡å»èµ·å§‹è¿­ä»£å™¨ `v.begin()`ã€‚
2.  **æŸ¥æ‰¾ `>= 30` çš„ç¬¬ä¸€ä¸ªå…ƒç´ **ï¼š
    ```cpp
    auto it = lower_bound(v.begin(), v.end(), 30);
    // it æŒ‡å‘ç´¢å¼•ä¸º 2 çš„ 30
    int index = it - v.begin(); // index = 2
    ```
3.  **æŸ¥æ‰¾ `> 30` çš„ç¬¬ä¸€ä¸ªå…ƒç´ **ï¼š
    ```cpp
    auto it = upper_bound(v.begin(), v.end(), 30);
    // it æŒ‡å‘ç´¢å¼•ä¸º 4 çš„ 40
    int index = it - v.begin(); // index = 4
    ```
4.  **æŸ¥æ‰¾ `== 30` çš„æœ€åä¸€ä¸ªå…ƒç´ **ï¼š
    `upper_bound` æ‰¾åˆ°ç¬¬ä¸€ä¸ªå¤§äº `30` çš„ä½ç½®ï¼Œå…¶å‰ä¸€ä¸ªä½ç½®å°±æ˜¯æœ€åä¸€ä¸ª `<= 30` çš„å…ƒç´ ã€‚å¦‚æœè¯¥å…ƒç´ æ°å¥½æ˜¯ `30`ï¼Œå°±æ‰¾åˆ°äº†ã€‚
    ```cpp
    auto it = upper_bound(v.begin(), v.end(), 30);
    it--; // æŒ‡å‘ç´¢å¼•ä¸º 3 çš„ 30
    int index = it - v.begin(); // index = 3
    ```
5.  **è®¡ç®—ç­‰äº `val` çš„å…ƒç´ ä¸ªæ•°**ï¼š
    `upper_bound` çš„ä½ç½®å‡å» `lower_bound` çš„ä½ç½®ï¼Œå°±æ˜¯ç­‰äº `val` çš„å…ƒç´ åŒºé—´é•¿åº¦ã€‚
    ```cpp
    auto low = lower_bound(v.begin(), v.end(), 30);
    auto up = upper_bound(v.begin(), v.end(), 30);
    int count = up - low; // count = 2
    ```
6.  **åˆ¤æ–­å…ƒç´ æ˜¯å¦å­˜åœ¨**ï¼š
    ```cpp
    auto it = lower_bound(v.begin(), v.end(), 35);
    // it != v.end() æ£€æŸ¥æ˜¯å¦è¶Šç•Œ
    // *it == 35 æ£€æŸ¥æ‰¾åˆ°çš„æ˜¯å¦å°±æ˜¯ç›®æ ‡å€¼
    if (it != v.end() && *it == 35) {
        // å­˜åœ¨
    } else {
        // ä¸å­˜åœ¨
    }
    ```

**ä½•æ—¶ä½¿ç”¨æ‰‹å†™æ¨¡æ¿ï¼Œä½•æ—¶ä½¿ç”¨ STLï¼Ÿ**

*   **ä½¿ç”¨ STL (`lower_bound`/`upper_bound`)**ï¼šå½“ä½ åœ¨ä¸€ä¸ª**å·²æ’åºçš„æ•°ç»„æˆ–å®¹å™¨**ä¸­ï¼Œè¿›è¡Œ**ç®€å•çš„å€¼æŸ¥æ‰¾**æ—¶ï¼ˆå¦‚ `==`, `>=`, `>`)ã€‚å®ƒä»£ç ç®€æ´ã€ä¸æ˜“å‡ºé”™ã€‚
*   **ä½¿ç”¨æ‰‹å†™äºŒåˆ†æ¨¡æ¿**ï¼šå½“äºŒåˆ†çš„å¯¹è±¡ä¸æ˜¯ä¸€ä¸ªå…·ä½“çš„æ•°ç»„ï¼Œè€Œæ˜¯**ç­”æ¡ˆç©ºé—´**æ—¶ï¼ˆä¾‹å¦‚ï¼Œæ±‚è§£â€œæœ€å¤§å€¼çš„æœ€å°å€¼â€é—®é¢˜ï¼‰ã€‚è¿™æ—¶ä½ éœ€è¦è‡ªå®šä¹‰ `check` å‡½æ•°çš„å¤æ‚é€»è¾‘ï¼Œæ‰‹å†™æ¨¡æ¿æä¾›äº†å¿…è¦çš„çµæ´»æ€§ã€‚


## äº”ã€å®æ•°äºŒåˆ†

å®æ•°äºŒåˆ†é€»è¾‘æ›´ç®€å•ï¼Œå› ä¸ºä¸éœ€è¦å¤„ç†æ¼äººçš„æ•´æ•°è¾¹ç•Œã€‚

*   **ç»ˆæ­¢æ¡ä»¶**ï¼šä¸å†æ˜¯ `l < r`ï¼Œè€Œæ˜¯é€šè¿‡**ç²¾åº¦**æˆ–**å›ºå®šæ¬¡æ•°**æ¥æ§åˆ¶ã€‚
    *   **ç²¾åº¦æ§åˆ¶**ï¼š`while (r - l > eps)`ï¼Œå…¶ä¸­ `eps` æ˜¯ä¸€ä¸ªæå°å€¼ (å¦‚ `1e-7`, `1e-8`)ã€‚
    *   **æ¬¡æ•°æ§åˆ¶**ï¼š`for (int i = 0; i < 100; ++i)`ã€‚å¯¹äº `double` ç±»å‹ï¼Œå¾ªç¯ 100 æ¬¡è¶³ä»¥è¾¾åˆ°éå¸¸é«˜çš„ç²¾åº¦ã€‚

#### å®æ•°äºŒåˆ†æ¨¡æ¿

```cpp
double binary_search_real(double L, double R) {
    const double eps = 1e-8;
    // while (R - L > eps) { // å†™æ³•1ï¼šç²¾åº¦æ§åˆ¶
    for (int i = 0; i < 100; ++i) { // å†™æ³•2ï¼šæ¬¡æ•°æ§åˆ¶ï¼Œæ›´å¸¸ç”¨
        double mid = L + (R - L) / 2; // é¿å…æº¢å‡ºï¼Œä¸”å®æ•°æ— å–æ•´é—®é¢˜
        if (check(mid)) {
            R = mid; // æˆ– L = midï¼Œå–å†³äº check çš„å®šä¹‰
        } else {
            L = mid;
        }
    }
    return L; // æˆ– Rï¼Œä¸¤è€…éå¸¸æ¥è¿‘
}
```

## æ€»ç»“

æŒæ¡â€œçº¢è“æŸ“è‰²â€æ¨¡å‹ï¼Œå¹¶ç‰¢è®°ä¸¤ä¸ªæ•´æ•°äºŒåˆ†æ¨¡æ¿åŠå…¶èƒŒåçš„é˜²æ­»å¾ªç¯åŸç†ï¼Œæ˜¯å½»åº•å¾æœ**ç­”æ¡ˆç©ºé—´äºŒåˆ†**çš„å…³é”®ã€‚å¯¹äº**æ•°ç»„ä¸Šçš„å€¼æŸ¥æ‰¾**ï¼Œåº”ä¼˜å…ˆä½¿ç”¨ `lower_bound` å’Œ `upper_bound`ï¼Œå®ƒä»¬æ›´ç®€æ´ã€æ›´å®‰å…¨ã€‚å¯¹äºå®æ•°äºŒåˆ†ï¼Œåˆ™å…³æ³¨ç²¾åº¦æ§åˆ¶å³å¯ã€‚

